name: CD

on:
  push:
    branches:
      - main
      - dev/*
      - feature/*
      - hotfix/*

jobs:
  semantic_release:
    uses: ./.github/workflows/.semantic-release.yaml
    secrets: inherit

  publish:
    if: "equals(needs.semantic_release.outputs.new_release_published, 'true')"

    needs: semantic_release
    runs-on: ubuntu-latest

    steps:
      - run: echo ${{ needs.semantic_release.outputs.new_release_version }}